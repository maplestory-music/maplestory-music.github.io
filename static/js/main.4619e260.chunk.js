(this["webpackJsonpmaplestory-music"]=this["webpackJsonpmaplestory-music"]||[]).push([[0],{209:function(e,t,n){},210:function(e,t,n){},291:function(e,t,n){"use strict";n.r(t);var a,c,r,i,o=n(0),l=n.n(o),u=n(27),s=n.n(u),b=(n(209),n(8)),d=n(4),h=n(9),O=(n(210),n(58)),j=n(23),f=n(40),m=n(311),p=n(202),g=n(305),v=n(166),y=n(1),S=function(){return Object(y.c)("div",{children:[Object(y.c)("div",{css:Object(h.a)(a||(a=Object(b.a)(["\n        @media (min-width: 1024px) {\n          margin-right: 33vw;\n        }\n      "]))),children:[Object(y.b)("h2",{children:"About"}),Object(y.b)("p",{children:"This database catalogs music from every region of MapleStory and aims to be the definitive resource for MapleStory music. It will be updated whenever new songs are added to the client of any region."}),Object(y.b)("h6",{children:Object(y.b)("b",{children:"Music Playback"})}),Object(y.b)("p",{children:"Music is played within an embedded YouTube player. The track is looped upon completion, unless in the shuffled queue mode (see below)."}),Object(y.b)("h6",{children:Object(y.b)("b",{children:"Shuffled Queue"})}),Object(y.b)("p",{children:"The shuffled queue feature randomizes the entire music collection and plays upcoming songs automatically. Skip to the next track or return to the previous track with the controls under the media player. When filters are applied to the grid, the song pool is limited to the filtered entries."}),Object(y.b)("h6",{children:Object(y.b)("b",{children:"Grid Controls"})}),Object(y.b)("p",{children:"To sort by a column, press the column header. Hover over a column header and press the menu icon to access the advanced filter dialog. Mobile users can access the filter dialog by pressing and holding the column header."}),Object(y.b)("h6",{children:Object(y.b)("b",{children:"Language"})}),Object(y.b)("p",{children:"Language support is a work in progress. Changing the language will translate metadata displayed for the songs in the grid. If there are no translations for an entry, English will be used as the default language."})]}),Object(y.b)("h2",{children:"Source"}),Object(y.b)("p",{children:"The following GitHub projects power this site."}),Object(y.c)("div",{className:"gh-project-entry",children:[Object(y.b)(v.a,{href:"https://github.com/maplestory-music/maplebgm-db","data-size":"large","data-show-count":!0,"aria-label":"Star maplestory-music/maplebgm-db on GitHub",children:"Star"}),Object(y.b)("h5",{className:"gh-project-name",children:"maplebgm-db: Definitive MapleStory music database"})]}),Object(y.c)("div",{className:"gh-project-entry",children:[Object(y.b)(v.a,{href:"https://github.com/maplestory-music/maplestory-music.github.io","data-size":"large","data-show-count":!0,"aria-label":"Star maplestory-music/maplestory-music.github.io on GitHub",children:"Star"}),Object(y.b)("h5",{className:"gh-project-name",children:"maplestory-music: MapleStory Music website"})]})]})},w=n(2),k=n(123),x=(n(238),n(239),n(240),n(307)),C=n(298),N=Object(C.a)("2014-11-20"),M="playingState",A=n(3),T=function(e){return Object(A.jsx)("span",{children:Object(A.jsx)("img",{src:"mark/".concat(e.value,".png"),alt:"icon"})})},I=n(312),E=n(299),D=new Event("pausevideo"),Q=function(e){var t=e.youtube,n=e.title;return""!==t?Object(y.c)("span",{children:[Object(y.b)(I.a,{delay:{show:1e3,hide:100},overlay:Object(y.b)(E.a,{id:"tooltip-ext-link",children:"View on YouTube"}),children:Object(y.b)("a",{css:Object(h.a)(c||(c=Object(b.a)(["\n            margin-right: 3px;\n          "]))),className:"bgm-external-link-icon",href:"https://youtu.be/".concat(t),rel:"noopener noreferrer",target:"_blank",onClick:function(){window.dispatchEvent(D),gtag("event","ce_view_external_video",{ce_category:"video",ce_youtube:e.youtube})},children:Object(y.b)("i",{className:"fa fa-external-link"})})}),Object(y.b)("a",{href:"# ",rel:"noopener noreferrer",onClick:function(t){gtag("event","ce_view_embedded_video",{ce_category:"video",ce_youtube:e.youtube}),e.onGridSongChange(e.youtube),t.preventDefault()},children:n})]}):Object(y.b)("span",{children:n})},_=n(316),R=n(300),z=function(e){var t=e.value,n=new Date,a=Object(_.a)(n,t)<3||Object(R.a)(t);return Object(y.c)("div",{className:"date-col",children:[Object(y.b)("span",{css:Object(h.a)(r||(r=Object(b.a)(["\n          margin-right: 3px;\n        "]))),children:e.valueFormatted}),!e.disableRecentTrack&&a&&Object(y.b)(I.a,{delay:{show:250,hide:100},overlay:Object(y.b)(E.a,{id:"tooltip-recent-track",children:"Recent Track"}),children:Object(y.b)("i",{className:"fa fa-star","aria-hidden":!0})})]})},P=n(317),F=l.a.createContext(void 0),W=function(e){var t=e.children,n=l.a.useState(darkmode.inDarkMode),a=Object(d.a)(n,2),c=a[0],r=a[1];return Object(o.useEffect)((function(){var e=localStorage.getItem("bs.prefers-color-scheme");void 0!==e&&r("dark"===e)}),[]),Object(o.useEffect)((function(){var e=document.documentElement,t=new MutationObserver((function(e){var t=null===e||void 0===e?void 0:e[0].target;"dark"===t.className?r(!0):"light"===t.className&&r(!1)}));return t.observe(e,{attributes:!0}),function(){t.disconnect()}}),[]),Object(A.jsx)(F.Provider,{value:{darkMode:c},children:t})},J=function(){var e=l.a.useContext(F);if(!e)throw new Error("useTheme must be used within a ThemeProvider");return e},L=n(170);!function(e){e.Korea="KMS",e.Japan="JMS",e.China="CMS",e.Taiwan="TMS",e.SEA="MSEA",e.Global="GMS",e.Thailand="ThMS",e.Brazil="BMS"}(i||(i={}));var V=function(e){if(!e.value)return{};var t=Object(L.b)("#6495ed",.5);return{backgroundColor:e.value.startsWith(i.Korea)?t:Object(L.a)(t)}},U=n(10),K={currentSong:void 0,currentQueue:[],currentQueueSong:-1,repeatQueue:!1},G=Object(U.atom)(void 0),q=Object(U.atom)(void 0),B=Object(U.atom)(!1),H=Object(U.atom)(K),Y=Object(U.atom)(!1),$=Object(U.atom)([]),X=Object(U.atom)(!1),Z=n(30),ee="custom-playlists",te=function(e,t){return"".concat(e,"/").concat(t)};function ne(e){localStorage.setItem(ee,JSON.stringify(e))}var ae=function(e){return"name"in e&&"tracks"in e},ce=function(e){var t,n=new Map,a=Object(Z.a)(e);try{for(a.s();!(t=a.n()).done;){var c=t.value;n.set(c.name,c)}}catch(r){a.e(r)}finally{a.f()}return n},re=(Object(U.atom)([]),Object(U.atom)(new Map)),ie=Object(U.atom)([]),oe=Object(U.atom)((function(e){var t=e(ie);return t.length?t.length>1?"multi":t[0]:"undefined"})),le=Object(U.atom)(new Set),ue="site-preferences",se=l.a.createContext(void 0),be={hideMinorTracks:!1,distinctKmstVersion:!1,jsonOptimizedTrackIdCopy:!1,savePlaylistState:!1};function de(e){localStorage.setItem(ue,JSON.stringify(e))}var he,Oe,je,fe,me,pe,ge,ve,ye,Se,we,ke,xe,Ce,Ne,Me,Ae,Te,Ie=function(e){var t=e.children,n=l.a.useState(function(){var e=localStorage.getItem(ue);if(null===e){var t=be;return de(t),t}return JSON.parse(e)}()),a=Object(d.a)(n,2),c=a[0],r=a[1];return Object(A.jsx)(se.Provider,{value:{settings:c,setSettings:function(e){r(e),de(e)}},children:t})},Ee=function(){var e=l.a.useContext(se);if(!e)throw new Error("useSettings must be used within a SettingsProvider");return e},De=function(e){var t=Ee().settings,n=e.data,a=Object(o.useMemo)((function(){return te(n.source.structure,n.filename)}),[n.source.structure,n.filename]),c=Object(U.useAtom)(le),r=Object(d.a)(c,2),i=r[0],l=r[1],u=Object(o.useMemo)((function(){return i.has(a)}),[a,i]),s=Object(o.useCallback)((function(){t.jsonOptimizedTrackIdCopy?navigator.clipboard.writeText('"'.concat(a,'",\n')):navigator.clipboard.writeText(a)}),[a,t.jsonOptimizedTrackIdCopy]);return Object(y.c)("span",{css:Object(h.a)(he||(he=Object(b.a)(["\n        display: flex;\n        justify-content: center;\n      "]))),children:[Object(y.b)("div",{css:Object(h.a)(Oe||(Oe=Object(b.a)(["\n          margin: 0 5px;\n        "]))),onClick:s,children:Object(y.b)(I.a,{delay:{show:1e3,hide:100},overlay:Object(y.b)(E.a,{id:"tooltip-copy-track-id",children:"Copy Track ID"}),children:Object(y.b)("i",{css:Object(h.a)(je||(je=Object(b.a)(["\n              cursor: pointer;\n            "]))),className:"fa-regular fa-copy"})})}),Object(y.b)("div",{onClick:function(){u?i.delete(a):i.add(a);var e=new Set(i);l(e)},children:Object(y.b)(I.a,{delay:{show:1e3,hide:100},overlay:Object(y.b)(E.a,{id:"tooltip-export",children:u?"Remove from Export Set":"Add to Export Set"}),children:Object(y.b)("i",{css:Object(h.a)(fe||(fe=Object(b.a)(["\n              cursor: pointer;\n              color: ",";\n            "])),u?"red":"green"),className:"fa-regular ".concat(u?"fa-square-minus":"fa-square-plus")})})})]})},Qe=function(e){return e?e.startsWith("en")?"en":e.startsWith("ko")?"ko":e.startsWith("ja")?"ja":"zh-CN"===e?"zh-CN":e.startsWith("zh")?"zh-TW":"en":"en"},_e=function(e){var t=e.dataSource,n=e.colState,a=e.enableTrackIdCol,c=e.enableHotCountCol,r=Object(P.a)().i18n,i=Object(U.useAtomValue)(G),l=Object(o.useRef)(null),u=Object(o.useRef)(null),s=Object(o.useRef)([]),O=Object(o.useRef)(void 0),j=J(),f=Object(U.useSetAtom)(H),m=Object(U.useAtomValue)(B),p=Object(U.useAtomValue)(q),g=Object(U.useSetAtom)(Y),v=Object(U.useSetAtom)($),S=Object(U.useSetAtom)(X);s.current=function(e,t,n){var a=[{headerName:"",field:"mark",minWidth:70,maxWidth:70,resizable:!1,cellRendererFramework:T,getQuickFilterText:function(){return""}},{hide:!t,cellRendererFramework:De,resizable:!1,maxWidth:35},{headerName:"Title",field:"metadata.title",minWidth:250,valueGetter:function(e){var t,n,a,c,r=e.context.i18n,i=e.data,o=Qe(r.language);return"en"===o?i.metadata.title:null!==(t=null===(n=i.locale)||void 0===n||null===(a=n[o])||void 0===a||null===(c=a.metadata)||void 0===c?void 0:c.title)&&void 0!==t?t:i.metadata.title},cellRendererFramework:Q,cellRendererParams:function(t){return{title:t.value,youtube:t.data.youtube,onGridSongChange:e}}},{headerName:"Description",minWidth:375,field:"description",valueGetter:function(e){var t,n,a,c=e.context.i18n,r=e.data,i=Qe(c.language);return"en"===i?r.description:null!==(t=null===(n=r.locale)||void 0===n||null===(a=n[i])||void 0===a?void 0:a.description)&&void 0!==t?t:r.description}},{headerName:"Folder",field:"source.structure",getQuickFilterText:function(){return""}},{headerName:"Date",field:"source.date",filter:"agDateColumnFilter",valueFormatter:function(e){return e.data.source.date?Object(x.a)(e.data.source.date,"yyyy-MM-dd"):""},cellRendererFramework:z,getQuickFilterText:function(){return""}},{headerName:"Client",field:"source.clientVersion",getQuickFilterText:function(){return""},cellStyle:V}];return n&&a.splice(1,0,{headerName:"",field:"count",width:55,minWidth:25,maxWidth:75}),a}((function(e){S(!0),f({currentSong:e,currentQueue:[],currentQueueSong:-1,repeatQueue:m})}),a,c),O.current={animateRows:!1,pagination:!0,paginationPageSize:25,suppressColumnVirtualisation:!0,suppressMovableColumns:!0,rowHeight:45,defaultColDef:{sortable:!0,filter:!0,resizable:!0},domLayout:"autoHeight"},Object(o.useEffect)((function(){var e;null===(e=l.current)||void 0===e||e.setQuickFilter(i)}),[i]),Object(o.useEffect)((function(){(null===p||void 0===p?void 0:p.songId)&&w(p.songId)}),[p]);var w=function(e){var t,n,a;if(e){var c=-1,r=[];if(null===(t=l.current)||void 0===t||t.forEachNodeAfterFilterAndSort((function(t,n){t.data.youtube===e&&(c=n,r.push(t))})),-1!==c&&1===r.length){var i=Math.ceil((c+1)/25)-1;null===(n=l.current)||void 0===n||n.paginationGoToPage(i),null===(a=l.current)||void 0===a||a.ensureIndexVisible(c,"middle"),r[0].setSelected(!0),setTimeout((function(){!function(e){var t;if(null!==e){var n=document.querySelector("div.ag-root-wrapper div[row-index='".concat(e,"']")),a=null===n||void 0===n?void 0:n.style.transform;if(a){var c=new RegExp(/^translateY\((\d+)px\)$/g).exec(a);if(c){var r=Object(d.a)(c,2)[1],i=null===(t=document.querySelector("div.ag-root-wrapper"))||void 0===t?void 0:t.offsetTop;if(void 0!==i){var o=i+Number(r);window.scrollTo({top:o,behavior:"smooth"})}}}}}(r[0].rowIndex)}),0)}}},C=Object(o.useCallback)((function(e,t){g(e),v(t)}),[g,v]),N=function(e,t){var n,a=null!==(n=null===e||void 0===e?void 0:e.isAnyFilterPresent())&&void 0!==n&&n,c=[];null===e||void 0===e||e.forEachNodeAfterFilterAndSort((function(e){c.push(e.data)})),t(a,c)};Object(o.useEffect)((function(){N(l.current,C)}),[t,C]);var M={i18n:r};return Object(y.b)("div",{css:Object(h.a)(me||(me=Object(b.a)(["\n        margin: auto;\n        width: 95vw;\n        margin-bottom: 15px;\n      "]))),className:j.darkMode?"ag-theme-balham-dark":"ag-theme-balham",children:Object(y.b)(k.AgGridReact,{columnDefs:s.current,rowData:t,gridOptions:O.current,onFirstDataRendered:function(e){var t=e.columnApi.getAllDisplayedColumns().filter((function(e){return"count"!==e.getId()}));e.columnApi.autoSizeColumns(t)},onFilterChanged:function(e){N(e.api,C)},onSortChanged:function(e){N(e.api,C)},onModelUpdated:function(e){e.api.getDisplayedRowCount()>0?e.api.hideOverlay():e.api.showNoRowsOverlay()},onGridReady:function(e){if(l.current=e.api,u.current=e.columnApi,n){var t={state:n};e.columnApi.applyColumnState(t)}},reactUi:!0,popupParent:document.querySelector("body")||void 0,context:M})})},Re=n(189),ze=n.n(Re),Pe=n(301),Fe=n(190),We=n(191),Je=n(320),Le=function(e){var t=Ee().settings,n=Object(o.useRef)(null),a=e.playingState,c=e.setCurrentQueueSong,r=Object(U.useAtomValue)(oe),i=Object(U.useAtom)(X),l=Object(d.a)(i,2),u=l[0],s=l[1],O=Object(o.useState)(a.currentQueueSong+1),j=Object(d.a)(O,2),f=j[0],m=j[1];Object(o.useEffect)((function(){t.savePlaylistState?localStorage.setItem(M,JSON.stringify(a)):localStorage.removeItem(M)}),[a,t.savePlaylistState]),Object(o.useEffect)((function(){m(a.currentQueueSong+1)}),[a.currentQueueSong]),Object(Je.a)("pausevideo",(function(){s(!1)}));return Object(y.c)("div",{children:[Object(y.b)(ze.a,{css:Object(h.a)(pe||(pe=Object(b.a)(["\n          display: block;\n          margin-left: auto;\n          margin-right: auto;\n          max-width: 100vw;\n        "]))),ref:n,url:"https://youtu.be/".concat(a.currentSong),playing:u,controls:!0,onPlay:function(){return s(!0)},onPause:function(){return s(!1)},onEnded:function(){if(null!==n.current)if(a.currentQueue.length){var e;if(gtag("event","ce_complete_queue_video",{ce_category:"video",ce_youtube:a.currentSong,ce_playlist_name:r}),a.currentQueueSong===a.currentQueue.length-1){if(!a.repeatQueue)return;e=0}else e=a.currentQueueSong+1;c(e)}else n.current.seekTo(0),gtag("event","ce_loop_embedded_video",{ce_category:"video",ce_youtube:a.currentSong})}}),a.currentQueue.length>0&&Object(y.b)("div",{className:"text-center",css:Object(h.a)(ge||(ge=Object(b.a)(["\n            margin-top: 5px;\n          "]))),children:Object(y.c)(Pe.a,{size:"sm",children:[Object(y.b)(Fe.a,{variant:"outline-primary",onClick:function(){a.currentQueueSong<1||c(a.currentQueueSong-1)},disabled:0===a.currentQueueSong,children:Object(y.b)("i",{className:"fa fa-step-backward"})}),Object(y.c)("div",{css:Object(h.a)(ve||(ve=Object(b.a)(["\n                display: inline-flex;\n                align-items: center;\n                padding: 0.25rem 0.5rem;\n                background-color: #343a40;\n                color: white;\n                font-size: 0.875rem;\n              "]))),children:[Object(y.b)(We.a,{type:"text",value:f,onChange:function(e){var t=parseInt(e.target.value,10);if(!isNaN(t)){var n=Math.max(1,Math.min(t,a.currentQueue.length));m(n)}},onBlur:function(){c(f-1)},onKeyDown:function(e){"Enter"!==e.key&&"Escape"!==e.key||e.target.blur()},css:Object(h.a)(ye||(ye=Object(b.a)(["\n                  height: 100%;\n                  width: 6ch;\n                  padding: 0.25rem;\n                  background-color: inherit;\n                  color: inherit;\n                  font-size: 0.875rem;\n                  text-align: center;\n                "])))}),Object(y.c)("span",{css:Object(h.a)(Se||(Se=Object(b.a)(["\n                  margin-left: 5px;\n                "]))),children:["/ ",a.currentQueue.length]})]}),Object(y.b)(Fe.a,{variant:"outline-primary",onClick:function(){a.currentQueueSong!==a.currentQueue.length-1&&c(a.currentQueueSong+1)},disabled:a.currentQueueSong+1===a.currentQueue.length,children:Object(y.b)("i",{className:"fa fa-step-forward"})})]})})]})},Ve=function(e){var t=e.noText;return Object(y.c)(o.Fragment,{children:[Object(y.b)("div",{children:Object(y.b)("img",{css:Object(h.a)(we||(we=Object(b.a)(["\n            display: block;\n            margin-left: auto;\n            margin-right: auto;\n            margin-bottom: 10px;\n          "]))),id:"header-logo",src:"assets/pink-bean.png",alt:"header logo"})}),t?null:Object(y.b)("div",{children:Object(y.b)("p",{children:"Welcome to the MapleStory Music database. This site provides a complete listing of the background music (BGM) used in MapleStory. Collectively, the songs are also known as MapleStory's original soundtrack (OST)."})})]})},Ue=n(310),Ke=n(302),Ge=n(75),qe=function(e){var t=e.iconClass,n=e.actionName,a=e.onClick,c=e.active;return Object(y.b)(Ge.a.Item,{onClick:a,active:c,children:Object(y.c)("span",{children:[Object(y.b)("i",{className:t,css:Object(h.a)(ke||(ke=Object(b.a)(["\n            width: 24px;\n          "])))}),n]})})},Be=n(313),He=function(){var e=Object(U.useSetAtom)(G),t=Object(U.useSetAtom)(q),n=Object(U.useAtom)(B),a=Object(d.a)(n,2),c=a[0],r=a[1],i=Object(U.useAtom)(H),o=Object(d.a)(i,2),l=o[0],u=o[1],s=Object(U.useAtomValue)($),O=Object(U.useAtomValue)(Y),j=Object(U.useAtomValue)(oe),f=Object(U.useSetAtom)(X);return Object(y.b)(Ue.a.Group,{css:Object(h.a)(xe||(xe=Object(b.a)(["\n        margin: 10px 14vw;\n      "]))),className:"filter-text",children:Object(y.c)(Ke.a,{size:"lg",children:[Object(y.b)(I.a,{delay:{show:250,hide:100},overlay:Object(y.b)(E.a,{id:"tooltip-locate-song",children:"Locate Current Song"}),children:Object(y.b)(Ke.a.Text,{css:Object(h.a)(Ce||(Ce=Object(b.a)(["\n              cursor: pointer;\n            "]))),onClick:function(){t({songId:l.currentSong})},children:Object(y.b)("i",{className:"fa fa-search"})})}),Object(y.b)(Ue.a.Control,{type:"search",placeholder:"Song title or keyword",onChange:function(t){e(t.target.value)},onKeyPress:function(e){"Enter"===e.key&&document.activeElement&&document.activeElement.blur()}}),Object(y.c)(Ge.a,{children:[Object(y.b)(I.a,{delay:{show:250,hide:100},overlay:Object(y.b)(E.a,{id:"tooltip-queue-actions",children:O?"Queue Actions (Filtered)":"Queue Actions"}),children:Object(y.b)(Ge.a.Toggle,{variant:O?"outline-warning":"outline-success",id:"dropdown-queue-actions",children:Object(y.b)("i",{className:"fa fa-play"})})}),Object(y.c)(Ge.a.Menu,{children:[Object(y.b)(qe,{actionName:"Start Queue",iconClass:"fa fa-play",onClick:function(){var e=s.filter((function(e){return""!==e.youtube}));e.length&&(f(!0),u({currentSong:e[0].youtube,currentQueue:e,currentQueueSong:0,repeatQueue:c}),gtag("event","ce_start_queue",{ce_category:"queue",ce_source:"play_button",ce_filtered:O,ce_playlist_name:j}))}}),Object(y.b)(qe,{actionName:"Start Shuffled Queue",iconClass:"fa fa-random",onClick:function(){var e=Object(Be.a)(s.filter((function(e){return""!==e.youtube})));e.length&&(f(!0),u({currentSong:e[0].youtube,currentQueue:e,currentQueueSong:0,repeatQueue:c}),gtag("event","ce_start_shuffled_queue",{ce_category:"queue",ce_source:"shuffle_button",ce_filtered:O,ce_playlist_name:j}))}}),Object(y.b)(Ge.a.Divider,{}),Object(y.b)(qe,{actionName:c?"Turn Off Queue Repeat":"Turn On Queue Repeat",iconClass:"fa fa-repeat",onClick:function(){var e=!c;r(e),f(!0),u((function(t){return Object(w.a)(Object(w.a)({},t),{},{repeatQueue:e})}))},active:c})]})]})]})})},Ye=Object(U.atom)([]),$e=l.a.createContext(void 0),Xe=function(e,t,n,a){if(a&&"KMST"===e&&null!==n&&n>=N){var c=t.split("."),r=Object(d.a)(c,3),i=r[0],o=r[1],l=r[2];return"".concat(e," ").concat(i,".").concat(o,".1").concat(l)}return"".concat(e," ").concat(t)},Ze=function(e){var t=e.children,n=l.a.useState([]),a=Object(d.a)(n,2),c=a[0],r=a[1],i=Object(U.useSetAtom)(re),u=Object(U.useSetAtom)(Ye),s=Ee().settings;return Object(o.useEffect)((function(){fetch("https://raw.githubusercontent.com/maplestory-music/maplebgm-db/prod/bgm.min.json").then((function(e){return e.json()})).then((function(e){var t=e.filter((function(e){var t,n;return!s.hideMinorTracks||(null===(t=!(null===(n=e.decoration)||void 0===n?void 0:n.minorTrack))||void 0===t||t)})).map((function(e){var t=e.source.date?Object(C.a)(e.source.date):null,n={client:e.source.client,date:t,structure:e.source.structure,version:e.source.version,clientVersion:e.source.client&&e.source.version?Xe(e.source.client,e.source.version,t,s.distinctKmstVersion):""};return Object.assign({},e,{source:n})}));r(t)})),fetch("https://raw.githubusercontent.com/maplestory-music/maplebgm-db/prod/playlist.min.json").then((function(e){return e.json()})).then((function(e){i(ce(e))})),fetch("https://raw.githubusercontent.com/maplestory-music/stats/prod/top25.json").then((function(e){return e.json()})).then((function(e){u(e.data)})).catch((function(e){console.error("Error parsing hot tracks.",e)}))}),[r,s.hideMinorTracks,s.distinctKmstVersion,i,u]),Object(A.jsx)($e.Provider,{value:c,children:t})},et=function(){var e=l.a.useContext($e);if(!e)throw new Error("useDataSourceState must be used within a DataSourceProvider");return e},tt=function(){var e=Ee().settings,t=et(),n=Object(U.useAtom)(H),a=Object(d.a)(n,2),c=a[0],r=a[1],i=Object(U.useSetAtom)(X);Object(o.useEffect)((function(){if(e.savePlaylistState){var t=localStorage.getItem(M);r(t?JSON.parse(t):K)}}),[r,e.savePlaylistState]);return Object(y.c)("div",{children:[void 0===c.currentSong?Object(y.b)(Ve,{}):Object(y.b)(Le,{playingState:c,setCurrentQueueSong:function(e){i(!0),r((function(t){return Object(w.a)(Object(w.a)({},t),{},{currentSong:t.currentQueue[e].youtube,currentQueueSong:e})}))}}),Object(y.b)(He,{}),Object(y.b)(_e,{dataSource:t,colState:[{colId:"source.date",sort:"desc"}]})]})},nt=n(318),at=n(319),ct=n(304),rt=n(303),it=n(195),ot=n.n(it),lt=n(196),ut=n.n(lt),st=function(e){var t=J(),n=Object(o.useState)(""),a=Object(d.a)(n,2),c=a[0],r=a[1];return Object(o.useEffect)((function(){var e=t.darkMode?"highcharts-dark":"highcharts-light";r(e)}),[t]),Object(y.b)("div",{css:[Object(h.a)(Ne||(Ne=Object(b.a)(["\n          display: inline-block;\n          margin: 10px;\n          @media (max-width: 1024px) {\n            width: 100%;\n          }\n        "]))),e.styles],children:Object(y.b)(ut.a,{containerProps:{className:"react-highcharts-container ".concat(c),style:{width:"100%",height:"100%"}},highcharts:ot.a,options:e.options,ref:e.chartComponent})})},bt=function(e,t){var n=Date.now(),a=Object(rt.a)(n)+1;return t===Object(ct.a)(n)?e.slice(0,1===a?a+1:a):e},dt=function(e){var t=Object(o.useRef)(null),n=et(),a=e.selectedYear,c=n.reduce((function(e,t){return t.metadata.year===a.toString()&&t.source.date&&e[Object(rt.a)(t.source.date)]++,e}),new Array(12).fill(0)),r=c.reduce((function(e,t,n){return 0===n?e[0]=t:e[n]=e[n-1]+t,e}),new Array(12).fill(0)),i={chart:{type:"line",styledMode:!0},title:{text:"Song frequency per month"},xAxis:{type:"datetime"},yAxis:[{title:{text:"Songs"},allowDecimals:!1},{title:{text:"Cumulative"},allowDecimals:!1,opposite:!0}],series:[{name:"Songs",type:"line",yAxis:0,pointStart:Date.UTC(a,0,1),pointIntervalUnit:"month",data:bt(c,a)},{name:"Cumulative",type:"line",yAxis:1,pointStart:Date.UTC(a,0,1),pointIntervalUnit:"month",data:bt(r,a)}]};return Object(y.b)(st,{styles:Object(h.a)(Me||(Me=Object(b.a)(["\n        width: 55vw;\n        flex: 2;\n      "]))),options:i,chartComponent:t})},ht=function(e){var t=Object(o.useRef)(null),n=et(),a=e.selectedYear,c=n.filter((function(e){var t;return(null===(t=e.source.date)||void 0===t?void 0:t.getFullYear())===a&&e.source.client})),r=function(e){return c.filter((function(t){var n;return null===(n=t.source.client)||void 0===n?void 0:n.includes(e)})).length},l=r(i.Korea),u={chart:{type:"pie",styledMode:!0},title:{text:"Distribution of song region"},series:[{id:"domesticVsOverseas",name:"Total Songs",type:"pie",data:[{name:"Domestic",colorIndex:8,y:l},{name:"Overseas",colorIndex:9,y:c.length-l}],size:"70%",dataLabels:{enabled:!1}},{id:"regional",name:"Songs",type:"pie",data:[{name:"Korea",colorIndex:8,y:l},{name:"Japan",y:r(i.Japan)},{name:"China",y:r(i.China)},{name:"Taiwan",y:r(i.Taiwan)},{name:"Thailand",y:r(i.Thailand)},{name:"SEA",y:r(i.SEA)},{name:"Global",y:r(i.Global)},{name:"Brazil",y:r(i.Brazil)}],size:"100%",innerSize:"70%",dataLabels:{formatter:function(e){if(this.y)return this.key}}}]};return Object(y.b)(st,{styles:Object(h.a)(Ae||(Ae=Object(b.a)(["\n        width: 35vw;\n        flex: 1;\n      "]))),options:u,chartComponent:t})},Ot=n(16),jt=n(315),ft=function(){var e=J(),t=et(),n=Object(o.useRef)(null),a=Object(o.useRef)(null),c=Object(o.useRef)([{headerName:"",field:"mark",minWidth:70,maxWidth:70,resizable:!1,cellRendererFramework:T},{headerName:"Folder",field:"folderName"},{headerName:"Creation",field:"creation",initialWidth:145,cellRendererFramework:z,cellRendererParams:{disableRecentTrack:!0},filter:"agDateColumnFilter",valueFormatter:function(e){return Number.isNaN(e.data.creation.valueOf())?"":Object(x.a)(e.data.creation,"yyyy-MM-dd")}},{headerName:"Creation Client",field:"creationClient",initialWidth:125,cellStyle:V},{headerName:"Last Update",field:"lastUpdate",initialWidth:145,cellRendererFramework:z,cellRendererParams:{disableRecentTrack:!0},filter:"agDateColumnFilter",valueFormatter:function(e){return Number.isNaN(e.data.lastUpdate.valueOf())?"":Object(x.a)(e.data.lastUpdate,"yyyy-MM-dd")}},{headerName:"Last Update Client",field:"lastUpdateClient",initialWidth:140,cellStyle:V},{headerName:"Track Count",field:"trackCount",initialWidth:110}]),r=Object(o.useRef)({animateRows:!1,pagination:!0,paginationPageSize:10,suppressColumnVirtualisation:!0,suppressMovableColumns:!0,rowHeight:45,defaultColDef:{sortable:!0,filter:!0,resizable:!0},domLayout:"autoHeight"}),i=Object(o.useMemo)((function(){var e,n=new Map,a=Object(Z.a)(t);try{for(a.s();!(e=a.n()).done;){var c=e.value,r=c.source.structure,i=n.get(r);i?n.set(r,[].concat(Object(Ot.a)(i),[c])):n.set(r,[c])}}catch(o){a.e(o)}finally{a.f()}return Array.from(n.entries()).reduce((function(e,t){var n=Object(d.a)(t,2),a=n[0],c=n[1],r=c.map((function(e){var t,n;return{date:null!==(t=null===(n=e.source.date)||void 0===n?void 0:n.valueOf())&&void 0!==t?t:Number.NaN,clientVersion:e.source.clientVersion}})).sort((function(e,t){return e.date-t.date})),i=Object.entries(Object(jt.a)(c.map((function(e){return e.mark})))).sort((function(e,t){return t[1]-e[1]})),o=r[0],l=r[r.length-1],u={folderName:a,trackCount:c.length,mark:i[0][0],creation:new Date(o.date),creationClient:o.clientVersion,lastUpdate:new Date(l.date),lastUpdateClient:l.clientVersion};return e.push(u),e}),[])}),[t]);return Object(A.jsx)("div",{className:e.darkMode?"ag-theme-balham-dark":"ag-theme-balham",children:Object(A.jsx)(k.AgGridReact,{columnDefs:c.current,rowData:i,gridOptions:r.current,onGridReady:function(e){n.current=e.api,a.current=e.columnApi;e.columnApi.applyColumnState({state:[{colId:"lastUpdate",sort:"desc"}]})},reactUi:!0,popupParent:document.querySelector("body")||void 0})})},mt=n(197),pt=2003,gt=["KMS","JMS","CMS","TMS","MSEA","GMS","ThMS","BMS"];function vt(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"en-US",t=new Intl.DateTimeFormat(e,{month:"long"}).format;return Object(Ot.a)(Array(12).keys()).map((function(e){return t(new Date(Date.UTC(pt,(e+1)%12)))}))}var yt,St,wt,kt,xt,Ct,Nt,Mt,At,Tt,It,Et,Dt,Qt,_t,Rt,zt,Pt,Ft,Wt,Jt,Lt,Vt,Ut,Kt,Gt,qt,Bt,Ht,Yt=function(){var e=Object(P.a)().i18n,t=Object(o.useRef)(null),n=et(),a=Object(o.useMemo)((function(){return n.reduce((function(e,t){var n,a=function(e){if(!e)return"None";var t,n=Object(Z.a)(gt);try{for(n.s();!(t=n.n()).done;){var a=t.value;if(e.includes(a))return a}}catch(c){n.e(c)}finally{n.f()}return"None"}(t.source.client),c=Object(rt.a)(null!==(n=t.source.date)&&void 0!==n?n:0),r=Object(mt.a)(e,a);return r&&(r[c]+=1),e}),{KMS:new Array(12).fill(0),JMS:new Array(12).fill(0),CMS:new Array(12).fill(0),TMS:new Array(12).fill(0),MSEA:new Array(12).fill(0),GMS:new Array(12).fill(0),ThMS:new Array(12).fill(0),BMS:new Array(12).fill(0)})}),[n]),c={chart:{type:"area",styledMode:!0},title:{text:"Song frequency per month (all years)"},xAxis:{categories:vt(e.language)},yAxis:[{title:{text:"Songs"},allowDecimals:!1}],tooltip:{shared:!0},plotOptions:{area:{stacking:"normal"}},series:gt.map((function(e){return{name:e,type:"area",yAxis:0,visible:e===i.Korea||e===i.Japan||e===i.China,data:Object(mt.a)(a,e)}}))};return Object(y.b)(st,{styles:Object(h.a)(Te||(Te=Object(b.a)(["\n        width: 35vw;\n        flex: 2;\n      "]))),options:c,chartComponent:t})},$t=function(){var e=Object(o.useRef)(null),t=et(),n=Object(ct.a)(Date.now())-pt+1,a=t.reduce((function(e,t){return t.metadata.year&&e[Number(t.metadata.year)-pt]++,e}),new Array(n).fill(0)),c=a.reduce((function(e,t,n){return 0===n?e[0]=t:e[n]=e[n-1]+t,e}),new Array(n).fill(0)),r={chart:{type:"line",styledMode:!0},title:{text:"Song frequency per year"},xAxis:{type:"datetime"},yAxis:[{title:{text:"Songs"},allowDecimals:!1},{title:{text:"Cumulative"},allowDecimals:!1,opposite:!0}],series:[{name:"Songs",type:"line",yAxis:0,pointStart:Date.UTC(pt,0,1),pointIntervalUnit:"year",data:a},{name:"Cumulative",type:"line",yAxis:1,pointStart:Date.UTC(pt,0,1),pointIntervalUnit:"year",data:c}]};return Object(y.b)(st,{styles:Object(h.a)(yt||(yt=Object(b.a)(["\n        width: 55vw;\n        flex: 2;\n      "]))),options:r,chartComponent:e})},Xt=function(){var e=Object(ct.a)(new Date),t=Object(o.useState)(e),n=Object(d.a)(t,2),a=n[0],c=n[1],r=Array(Object(ct.a)(new Date)-pt+1).fill(0).map((function(e,t){return pt+t}));return Object(y.c)("div",{children:[Object(y.b)("h2",{children:"Stats"}),Object(y.c)(nt.a,{defaultActiveKey:"yearly",children:[Object(y.c)(at.a,{eventKey:"yearly",title:"Yearly",children:[Object(y.b)(Ue.a,{css:Object(h.a)(St||(St=Object(b.a)(["\n              margin-top: 10px;\n            "]))),children:Object(y.b)(Ue.a.Group,{controlId:"year-select",children:Object(y.b)(Ue.a.Select,{css:Object(h.a)(wt||(wt=Object(b.a)(["\n                  width: 100px;\n                "]))),defaultValue:e,onChange:function(e){e.target.value&&c(+e.target.value)},children:r.map((function(e){return Object(y.b)("option",{value:e,children:e},e)}))})})}),Object(y.c)("div",{css:Object(h.a)(kt||(kt=Object(b.a)(["\n              display: flex;\n              align-items: center;\n              flex-direction: row;\n              flex-wrap: wrap;\n            "]))),children:[Object(y.b)(dt,{selectedYear:a}),Object(y.b)(ht,{selectedYear:a})]})]}),Object(y.b)(at.a,{eventKey:"overview",title:"Overview",children:Object(y.c)(y.a,{children:[Object(y.b)(Yt,{}),Object(y.b)($t,{})]})})]}),Object(y.b)("div",{children:Object(y.b)(ft,{})})]})},Zt=n(306),en=n(314),tn=function(e){var t=e.id,n=e.label,a=e.checked,c=e.tooltip,r=e.onChange;return Object(y.c)("div",{css:Object(h.a)(xt||(xt=Object(b.a)(["\n        display: flex;\n        align-items: center;\n      "]))),children:[Object(y.b)(Ue.a.Check,{type:"switch",id:"".concat(t,"-switch"),label:n,checked:a,onChange:r}),Object(y.b)(I.a,{delay:{show:250,hide:100},placement:"right",overlay:Object(y.b)(E.a,{id:"tooltip-".concat(t),children:c}),children:Object(y.b)("i",{css:Object(h.a)(Ct||(Ct=Object(b.a)(["\n            margin: 0 4px;\n          "]))),className:"fa fa-question-circle","aria-hidden":!0})})]})},nn=function(e){var t=e.show,n=e.onModalClose,a=Ee(),c=a.settings,r=a.setSettings,i=Object(o.useState)(c.hideMinorTracks),l=Object(d.a)(i,2),u=l[0],s=l[1],O=Object(o.useState)(c.distinctKmstVersion),j=Object(d.a)(O,2),f=j[0],m=j[1],p=Object(o.useState)(c.jsonOptimizedTrackIdCopy),g=Object(d.a)(p,2),v=g[0],S=g[1],w=Object(o.useState)(c.savePlaylistState),k=Object(d.a)(w,2),x=k[0],C=k[1];return Object(y.c)(en.a,{show:t,onShow:function(){s(c.hideMinorTracks),m(c.distinctKmstVersion),S(c.jsonOptimizedTrackIdCopy),C(c.savePlaylistState)},onHide:n,children:[Object(y.b)(en.a.Header,{closeButton:!0,children:Object(y.b)(en.a.Title,{children:"Settings"})}),Object(y.b)(en.a.Body,{children:Object(y.b)(Ue.a,{children:Object(y.b)(y.a,{children:Object(y.c)("div",{css:Object(h.a)(Nt||(Nt=Object(b.a)(["\n                display: flex;\n                flex-direction: column;\n              "]))),children:[Object(y.b)(tn,{id:"minorTrack",label:"Hide Minor Tracks",checked:u,tooltip:"Minor tracks feature segments of another song",onChange:function(){s((function(e){return!e}))}}),Object(y.b)(tn,{id:"distinctKmstVersion",label:"Distinct KMST Version",checked:f,tooltip:"Prevent collisions resulting from KMST version reset",onChange:function(){m((function(e){return!e}))}}),Object(y.b)(tn,{id:"jsonOptimizedTrackIdCopy",label:"JSON Optimized Track ID Copy",checked:v,tooltip:"Wrap track ID in JSON compatible syntax",onChange:function(){S((function(e){return!e}))}}),Object(y.b)(tn,{id:"savePlaylistState",label:"Save Current Playlist",checked:x,tooltip:"Saves your current playlist in the browser's storage. Newly released tracks will not be added automatically.",onChange:function(){C((function(e){return!e}))}})]})})})}),Object(y.b)(en.a.Footer,{children:Object(y.b)(Fe.a,{variant:"primary",onClick:function(){r({hideMinorTracks:u,distinctKmstVersion:f,jsonOptimizedTrackIdCopy:v,savePlaylistState:x}),n()},children:"Save"})})]})},an=function(e){var t=e.theme,n=e.margin,a="light"===t?"fa fa-sun":"fa fa-moon";return Object(y.b)("i",{className:a,css:Object(h.a)(Mt||(Mt=Object(b.a)(["\n        width: 16px;\n        height: 16px;\n        text-align: center;\n        margin-right: ",";\n      "])),n?"5px":void 0)})},cn=n(199),rn=n(309),on=function(){var e=J(),t=et(),n=Object(o.useState)(t),a=Object(d.a)(n,2),c=a[0],r=a[1],i=Object(U.useAtomValue)(re),l=Object(o.useMemo)((function(){return function(){var e=localStorage.getItem(ee);if(e){var t=JSON.parse(e);return ce(t)}return new Map}()}),[]),u=Object(U.useAtom)(H),s=Object(d.a)(u,2),O=s[0],j=s[1],f=Object(U.useSetAtom)(X),m=Object(o.useRef)(null),p=Object(o.useState)([]),g=Object(d.a)(p,2),v=g[0],S=g[1],k=Object(o.useMemo)((function(){return Array.from(i.values()).map((function(e){return{value:e.name,label:e.name}}))}),[i]),x=Object(o.useMemo)((function(){return Array.from(l.values()).map((function(e){return{value:e.name,label:"[Custom] ".concat(e.name),custom:!0}}))}),[l]),C=Object(o.useMemo)((function(){return[].concat(Object(Ot.a)(k),Object(Ot.a)(x))}),[k,x]),N=Object(U.useSetAtom)(ie),M=Object(U.useAtom)(le),A=Object(d.a)(M,2),T=A[0],I=A[1];Object(o.useEffect)((function(){j(K)}),[j]),Object(o.useEffect)((function(){if(t.length)if(v&&v.length){var e,n=new Set,a=Object(Z.a)(v);try{for(a.s();!(e=a.n()).done;){var c=e.value,o=(c.custom?l:i).get(c.value);if(!o)return;o.tracks.forEach((function(e){return n.add(e)}))}}catch(d){a.e(d)}finally{a.f()}var u=Array.from(n),s=t.filter((function(e){var t=te(e.source.structure,e.filename);return n.has(t)})),b=Object(rn.a)(s,(function(e){var t=te(e.source.structure,e.filename);return u.indexOf(t)}));r(b)}else r(t)}),[t,i,l,v]);return Object(y.c)("div",{children:[void 0===O.currentSong?Object(y.b)(Ve,{noText:!0}):Object(y.b)(Le,{playingState:O,setCurrentQueueSong:function(e){f(!0),j((function(t){return Object(w.a)(Object(w.a)({},t),{},{currentSong:t.currentQueue[e].youtube,currentQueueSong:e})}))}}),Object(y.c)("div",{css:Object(h.a)(At||(At=Object(b.a)(["\n          display: flex;\n          margin: 10px 25vw;\n          justify-content: center;\n          align-items: center;\n          height: 46px;\n        "]))),children:[Object(y.b)(cn.a,{css:Object(h.a)(Tt||(Tt=Object(b.a)(["\n            width: 100%;\n          "]))),classNamePrefix:e.darkMode?"playlist-select-dark":"playlist-select",isMulti:!0,options:C,ref:m,value:v,onChange:function(e){S(e),N(e.map((function(e){return e.value})))},placeholder:"Select playlist"}),Object(y.c)(Ge.a,{css:Object(h.a)(It||(It=Object(b.a)(["\n            height: 100%;\n          "]))),children:[Object(y.b)(Ge.a.Toggle,{css:Object(h.a)(Et||(Et=Object(b.a)(["\n              height: 100%;\n            "]))),variant:"outline-primary",children:Object(y.b)("i",{className:"fa fa-cog"})}),Object(y.c)(Ge.a.Menu,{children:[Object(y.b)(qe,{actionName:"Copy Export Set",iconClass:"fa fa-copy",onClick:function(){var e=Array.from(T),t=JSON.stringify(e,null,2);navigator.clipboard.writeText(t)}}),Object(y.b)(qe,{actionName:"Clear Export Set",iconClass:"fa fa-trash",onClick:function(){I(new Set)}})]})]})]}),Object(y.b)(He,{}),Object(y.b)(_e,{dataSource:c,enableTrackIdCol:!0})]})},ln=new FileReader,un=function(){var e=Object(o.useState)(void 0),t=Object(d.a)(e,2),n=t[0],a=t[1],c=Object(o.useState)(""),r=Object(d.a)(c,2),i=r[0],l=r[1];return Object(o.useEffect)((function(){ln.onload=function(){var e=ln.result;if("string"===typeof e)try{var t=JSON.parse(e);if(null===t||void 0===t?void 0:t.length){var n,a=Object(Z.a)(t);try{for(a.s();!(n=a.n()).done;){var c=n.value;if(!ae(c))return void l("Incorrect JSON structure")}}catch(r){a.e(r)}finally{a.f()}ne(t)}else{if(!ae(t))return void l("Incorrect JSON structure");ne([t])}}catch(i){l("Cannot parse JSON")}else l("File content not string")}}),[]),Object(y.c)("div",{children:[Object(y.c)("div",{css:Object(h.a)(Dt||(Dt=Object(b.a)(["\n          @media (min-width: 1024px) {\n            margin-right: 33vw;\n          }\n        "]))),children:[Object(y.b)("h2",{children:"Playlist Builder"}),Object(y.c)("p",{children:["Import and export custom playlists. JSON structure can be found"," ",Object(y.b)("a",{href:"https://github.com/maplestory-music/maplebgm-db/blob/master/playlist/blockbuster/BlackHeaven.jsonc",target:"_blank",rel:"noreferrer",children:"here"}),"; track IDs may be copied from the Playlist page. Tracks can also be added to and removed from the Export Set on the Playlist page. The Export Set can be copied and cleared from the Playlist Settings dropdown."]}),Object(y.b)("p",{css:Object(h.a)(Qt||(Qt=Object(b.a)(["\n            color: red;\n          "]))),children:"All custom playlists are stored in the browser's localStorage and may be cleared without notice. Export frequently and use at your own risk."})]}),Object(y.c)("div",{css:Object(h.a)(_t||(_t=Object(b.a)(["\n          margin: 10px 0;\n        "]))),children:[Object(y.b)("h4",{children:"Import"}),Object(y.b)("div",{css:Object(h.a)(Rt||(Rt=Object(b.a)(["\n            margin: 10px 0;\n          "]))),children:Object(y.c)("span",{children:["Import custom playlists from a JSON file."," ",Object(y.b)("span",{css:Object(h.a)(zt||(zt=Object(b.a)(["\n                color: red;\n              "]))),children:"This will overwrite existing custom playlists."})]})}),Object(y.c)("div",{children:[Object(y.b)("input",{type:"file",accept:".json",onChange:function(e){e.target.files&&e.target.files.length&&a(e.target.files[0])},onClick:function(){l("")}}),Object(y.b)("button",{onClick:function(){n&&("application/json"===n.type?ln.readAsText(n):l("File type not JSON"))},children:"Import"}),i&&Object(y.c)("div",{css:Object(h.a)(Pt||(Pt=Object(b.a)(["\n                color: red;\n              "]))),children:["Error: ",i]})]})]}),Object(y.c)("div",{css:Object(h.a)(Ft||(Ft=Object(b.a)(["\n          margin: 20px 0;\n        "]))),children:[Object(y.b)("h4",{children:"Export"}),Object(y.b)("div",{css:Object(h.a)(Wt||(Wt=Object(b.a)(["\n            margin: 10px 0;\n          "]))),children:Object(y.b)("span",{children:"Export all custom playlists into a JSON file."})}),Object(y.b)("div",{children:Object(y.b)("button",{onClick:function(){var e=null,t=function(){var e=localStorage.getItem(ee);if(e)try{return JSON.parse(e)}catch(t){throw new Error("Error parsing JSON from localStorage")}return[]}(),n=JSON.stringify(t,null,2);if(n&&t.length){var a=document.createElement("a");a.setAttribute("download","maplestory-custom-playlists.json"),a.href=function(){var t=new Blob([n],{type:"application/json"});return null!==e&&window.URL.revokeObjectURL(e),e=window.URL.createObjectURL(t)}(),a.click()}else window.alert("Nothing to export")},children:"Export"})})]}),Object(y.c)("div",{css:Object(h.a)(Jt||(Jt=Object(b.a)(["\n          margin: 20px 0;\n        "]))),children:[Object(y.b)("h4",{children:"Reset"}),Object(y.b)("div",{css:Object(h.a)(Lt||(Lt=Object(b.a)(["\n            margin: 10px 0;\n          "]))),children:Object(y.b)("span",{children:"If there are any issues, you can wipe all custom playlists."})}),Object(y.b)("div",{children:Object(y.b)("button",{onClick:function(){window.confirm("Wipe all custom playlists?")&&localStorage.removeItem(ee)},children:"Wipe"})})]})]})},sn=function(){var e=Object(U.useAtomValue)(Ye),t=et(),n=Object(o.useState)([]),a=Object(d.a)(n,2),c=a[0],r=a[1],i=Object(U.useAtom)(H),l=Object(d.a)(i,2),u=l[0],s=l[1],b=Object(U.useSetAtom)(X);Object(o.useEffect)((function(){s(K)}),[s]);return Object(o.useEffect)((function(){if(t.length){var n,a=new Map,c=Object(Z.a)(e);try{for(c.s();!(n=c.n()).done;){var i=n.value;a.set(i.track,i.count)}}catch(l){c.e(l)}finally{c.f()}var o=function(e,t){var n,a=[],c=Object(Z.a)(e);try{for(c.s();!(n=c.n()).done;){var r=n.value,i=r.youtube;t.has(i)&&a.push(Object(w.a)(Object(w.a)({},r),{},{count:t.get(i)}))}}catch(l){c.e(l)}finally{c.f()}return a}(t,a);r(o)}}),[e,t]),Object(y.c)("div",{children:[void 0===u.currentSong?Object(y.b)(Ve,{noText:!0}):Object(y.b)(Le,{playingState:u,setCurrentQueueSong:function(e){b(!0),s((function(t){return Object(w.a)(Object(w.a)({},t),{},{currentSong:t.currentQueue[e].youtube,currentQueueSong:e})}))}}),Object(y.b)(He,{}),Object(y.b)(_e,{dataSource:c,colState:[{colId:"count",sort:"desc"}],enableHotCountCol:!0})]})},bn=n(308),dn=Object(f.a)(),hn=function(e){e.currentTarget.pathname===window.location.pathname&&e.preventDefault()},On=function(){var e,t,n,a=Object(P.a)().i18n,c=J(),r=Object(o.useState)(!1),i=Object(d.a)(r,2),l=i[0],u=i[1];return Object(y.c)(y.a,{children:[Object(y.c)(m.a,{css:Object(h.a)(Vt||(Vt=Object(b.a)(["\n          margin-bottom: 10px;\n        "]))),bg:"dark",variant:"dark",expand:"lg",children:[Object(y.c)(m.a.Brand,{css:Object(h.a)(Ut||(Ut=Object(b.a)(["\n            margin-left: 1rem;\n          "]))),as:O.a,to:"/",onClick:hn,children:[Object(y.b)("img",{css:Object(h.a)(Kt||(Kt=Object(b.a)(["\n              margin-right: 8px;\n            "]))),alt:"",src:"./assets/pb-logo.svg",width:"30",height:"30",className:"d-inline-block align-top"})," ","MapleStory Music"]}),Object(y.b)(m.a.Toggle,{"aria-controls":"basic-navbar-nav"}),Object(y.b)(m.a.Collapse,{id:"basic-navbar-nav",children:Object(y.c)(p.a,{className:"mr-auto",children:[Object(y.b)(p.a.Link,{as:O.b,exact:!0,to:"/",onClick:hn,children:"Home"}),Object(y.b)(p.a.Link,{as:O.b,exact:!0,to:"/hot",onClick:hn,children:"Hot"}),Object(y.b)(p.a.Link,{as:O.b,exact:!0,to:"/playlist",onClick:hn,children:"Playlist"}),Object(y.b)(p.a.Link,{as:O.b,exact:!0,to:"/stats",onClick:hn,children:"Stats"}),Object(y.b)(p.a.Link,{as:O.b,exact:!0,to:"/about",onClick:hn,children:"About"}),Object(y.b)(g.a,{title:"Extras",children:Object(y.b)(g.a.Item,{as:O.b,exact:!0,to:"/playlist-builder",onClick:hn,children:"Playlist Builder"})}),Object(y.c)(g.a,{title:c.darkMode?Object(y.b)(an,{theme:"dark"}):Object(y.b)(an,{theme:"light"}),children:[Object(y.c)(g.a.Item,{active:!c.darkMode,onClick:function(){c.darkMode&&(darkmode.setDarkMode(!1),gtag("event","ce_ui_light",{ce_category:"ui",ce_source:"navbar"}))},children:[Object(y.b)(an,{theme:"light",margin:!0}),"Light"]}),Object(y.c)(g.a.Item,{active:c.darkMode,onClick:function(){c.darkMode||(darkmode.setDarkMode(!0),gtag("event","ce_ui_dark",{ce_category:"ui",ce_source:"navbar"}))},children:[Object(y.b)(an,{theme:"dark",margin:!0}),"Dark"]})]}),Object(y.c)(g.a,{title:Object(y.b)("i",{className:"fa fa-earth-americas"}),children:[Object(y.b)(g.a.Item,{active:null===(e=a.language)||void 0===e?void 0:e.startsWith("en"),onClick:function(){return a.changeLanguage("en")},children:"English"}),Object(y.b)(g.a.Item,{active:null===(t=a.language)||void 0===t?void 0:t.startsWith("ko"),onClick:function(){return a.changeLanguage("ko")},children:"Korean"}),Object(y.b)(g.a.Item,{active:null===(n=a.language)||void 0===n?void 0:n.startsWith("ja"),onClick:function(){return a.changeLanguage("ja")},children:"Japanese"}),Object(y.b)(g.a.Item,{active:"zh-CN"===a.language,onClick:function(){return a.changeLanguage("zh-CN")},children:"Chinese (Simplified)"}),Object(y.b)(g.a.Item,{active:"zh-TW"===a.language,onClick:function(){return a.changeLanguage("zh-TW")},children:"Chinese (Traditional)"})]}),Object(y.b)(p.a.Link,{as:O.b,to:"#",onClick:function(){return u(!0)},children:Object(y.b)("i",{className:"fa fa-cog"})})]})})]}),Object(y.b)(nn,{show:l,onModalClose:function(){return u(!1)}})]})},jn=function(){var e,t,n=null!==(e="d2ae3ff")?e:"Dev",a=null!==(t="2025-06-07")?t:Object(Zt.a)(new Date,{representation:"date"});return Object(y.b)("div",{css:Object(h.a)(Gt||(Gt=Object(b.a)(["\n        text-align: center;\n        margin-bottom: 10px;\n      "]))),className:"footer",children:Object(y.b)("span",{children:"Build: ".concat(n," (").concat(a,")")})})},fn="MapleStory Music - BGM & OST Database",mn=function(){var e=Object(j.f)();return Object(o.useEffect)((function(){var t;document.title="/"===(t=e.pathname)?fn:"".concat(fn," | ").concat(Object(bn.a)(t))}),[e]),Object(y.b)("main",{children:Object(y.c)(j.c,{children:[Object(y.b)(j.a,{exact:!0,path:"/",component:pn}),Object(y.b)(j.a,{path:"/playlist",component:gn}),Object(y.b)(j.a,{path:"/stats",component:yn}),Object(y.b)(j.a,{path:"/about",component:vn}),Object(y.b)(j.a,{path:"/playlist-builder",component:Sn}),Object(y.b)(j.a,{path:"/hot",component:wn})]})})},pn=function(){return Object(y.b)("div",{className:"App",children:Object(y.b)(tt,{})})},gn=function(){return Object(y.b)("div",{className:"App",children:Object(y.b)(on,{})})},vn=function(){return Object(y.b)("div",{css:Object(h.a)(qt||(qt=Object(b.a)(["\n      margin: 2% 3% 3% 3%;\n    "]))),className:"About",children:Object(y.b)(S,{})})},yn=function(){return Object(y.b)("div",{css:Object(h.a)(Bt||(Bt=Object(b.a)(["\n      margin: 2% 3% 1% 3%;\n    "]))),className:"Stats",children:Object(y.b)(Xt,{})})},Sn=function(){return Object(y.b)("div",{css:Object(h.a)(Ht||(Ht=Object(b.a)(["\n      margin: 2% 3% 3% 3%;\n    "]))),className:"About",children:Object(y.b)(un,{})})},wn=function(){return Object(y.b)("div",{className:"App",children:Object(y.b)(sn,{})})},kn=function(){return Object(y.b)(W,{children:Object(y.b)(Ie,{children:Object(y.b)(Ze,{children:Object(y.b)(j.b,{history:dn,children:Object(y.c)("div",{children:[Object(y.b)(On,{}),Object(y.b)(mn,{}),Object(y.b)(jn,{})]})})})})})},xn=n(200),Cn=n(116),Nn=n(201);xn.a.use(Nn.a).use(Cn.e).init({fallbackLng:{zh:["zh-TW","zh-CN","en"],default:["en"]},nonExplicitSupportedLngs:!0,supportedLngs:["en","ko","ja","zh"]});Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(Object(A.jsx)(l.a.StrictMode,{children:Object(A.jsx)(o.Suspense,{fallback:Object(A.jsx)("div",{children:"Loading..."}),children:Object(A.jsx)(kn,{})})}),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[291,1,2]]]);